<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Solaris10下DNS服务器安全攻略 | ICT经验网</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Solaris10下DNS服务器安全攻略</h1><a id="logo" href="/.">ICT经验网</a><p class="description">关注Linux、PHP、WordPress、虚拟化、深度学习等</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Solaris10下DNS服务器安全攻略</h1><div class="post-meta">2008-10-01<span> | </span><span class="category"><a href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/">未分类</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 3.2k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 14</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">};</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-1"><span class="toc-number">2.</span> <span class="toc-text">};</span></a></li></ol></div></div><div class="post-content"><p>DNS服务器是为了网络上的主机提供域名解析的服务的服务器。Solaris10虽然自带了BIND9.2.4版本，但它并不是Sun公司的产品，InternetSoftwareConsortium负责BIND软件的更新，我们应当到<a target="_blank" rel="noopener" href="http://www.isc.org网站下载最新版本的bind软件,因为新的版本的软件可以防止某些漏洞./">www.isc.org网站下载最新版本的BIND软件，因为新的版本的软件可以防止某些漏洞。</a></p>
<p>下面我们来介绍如何配置DNS服务器。</p>
<p><strong>一、从源代码安装配置DNS服务器</strong></p>
<p>(1)为了下载最新的BIND软件，我们到<a target="_blank" rel="noopener" href="http://www.isc.org/products/BIND/%E4%B8%8B%E8%BD%BD%EF%BC%8C%E6%9C%AC%E4%BE%8B%E5%AD%90%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%98%AFbind-9.3.2.tar.gz%E3%80%82">http://www.isc.org/products/BIND/下载，本例子下载的是bind-9.3.2.tar.gz。</a></p>
<p>(2)将下载的软件放到系统中的某个目录下，本例中放在usr&#x2F;local&#x2F;src目录下。</p>
<p>#cdusr&#x2F;local&#x2F;src</p>
<p>#wget<a target="_blank" rel="noopener" href="http://ftp.isc.org/isc/bind9/9.3.2/bind-9.3.2.tar.gz">http://ftp.isc.org/isc/bind9/9.3.2/bind-9.3.2.tar.gz</a></p>
<p>#cpbind-9.3.2.tar.gz..</p>
<p>#cd..</p>
<p>#gzip-dbind-9.3.2.tar.gz</p>
<p>#tar-vxfbind-9.3.2.tar</p>
<p>#rmbind-9.3.2.tar</p>
<p>#cdbind-9.3.2</p>
<p>#.&#x2F;configure</p>
<p>#make</p>
<p>#makeinstall</p>
<p>#cd&#x2F;usr&#x2F;sbin</p>
<p>(3)生成的可执行文件位于&#x2F;usr&#x2F;local&#x2F;sbin目录下。最重要的可执行文件为named和rndc。</p>
<p>#&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;rndc-confgen&gt;&#x2F;etc&#x2F;rndc.conf</p>
<p>#cat&#x2F;etc&#x2F;rndc.conf</p>
<p>输出为：</p>
<p>#Startofrndc.conf</p>
<p>key”rndc-key”…{</p>
<p>algorithmhmac-md5;</p>
<p>secret”y9xvvfQjdWv9f&#x2F;Fo7wquBg&#x3D;&#x3D;”;</p>
<p>};</p>
<p>options…{</p>
<p>default-key”rndc-key”;</p>
<p>default-server127.0.0.1;</p>
<p>default-port953;</p>
<p>};</p>
<p>#Endofrndc.conf</p>
<p>#Usewiththefollowinginnamed.conf,adjustingtheallowlistasneeded:</p>
<p>#key”rndc-key”…{</p>
<p>#algorithmhmac-md5;</p>
<p>#secret”y9xvvfQjdWv9f&#x2F;Fo7wquBg&#x3D;&#x3D;”;</p>
<h1 id=""><a href="#" class="headerlink" title="};"></a>};</h1><p>#controls…{</p>
<p>#inet127.0.0.1port953</p>
<p>#allow…{127.0.0.1;}keys…{“rndc-key”;};</p>
<h1 id="-1"><a href="#-1" class="headerlink" title="};"></a>};</h1><p>#Endofnamed.conf</p>
<p>(9)创建rndc.key文件。将rndc.conf文件中注释部分拷贝生成如下文件：</p>
<p>#vi&#x2F;etc&#x2F;rndc.key</p>
<p>key”rndc-key”…{</p>
<p>algorithmhmac-md5;</p>
<p>secret”y9xvvfQjdWv9f&#x2F;Fo7wquBg&#x3D;&#x3D;”;</p>
<p>};</p>
<p>controls…{</p>
<p>inet127.0.0.1port953\</p>
<p>allow…{127.0.0.1;}keys…{“rndc-key”;};\</p>
<p>};</p>
<p>检查rndc是否正常工作：</p>
<p>#&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;named-g</p>
<p>Jan1111:56:45.075startingBIND9.2.3-g</p>
<p>Jan1111:56:45.076using1CPU</p>
<p>Jan1111:56:45.079loadingconfigurationfrom’&#x2F;etc&#x2F;named.conf’</p>
<p>……</p>
<p>#&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;rndcstatus</p>
<p>(10)编辑named.conf配置文件。</p>
<p>#vi&#x2F;etc&#x2F;named.conf</p>
<p>第一段的内容如下：</p>
<p>&#x2F;&#x2F;generatedbynamed-bootconf.pl</p>
<p>options…{</p>
<p>directory”&#x2F;var&#x2F;named”;</p>
<p>&#x2F;**&#x2F;&#x2F;*</p>
<p>*Ifthereisafirewallbetweenyouandnameserversyouwant</p>
<p>*totalkto,youmightneedtouncommentthequery-source</p>
<p>*directivebelow.PreviousversionsofBINDalwaysasked</p>
<p>*portbydefault.</p>
<p>*&#x2F;</p>
<p>&#x2F;&#x2F;query-sourceaddress*port53;</p>
<p>};</p>
<p>上面的部分是在这个文件开头的options设定的，首先用directory指定了named的资源记录(RR-ResourceRecord文件目录所在位置为：“&#x2F;var&#x2F;named”。也就是说，它会到这个目录下面寻找DNS记录文件)。所以，我们在后面部分所指定的文件，就无须使用绝对路径了，但它们一定要放在这个目录下面。</p>
<p>那一段被注释文字，如果你仔细阅读一下，它大致意思是如果你要设定的DNS服务器和client之间隔着防火墙的话，要将“&#x2F;&#x2F;query-sourceaddress*port53;”前面的注解符号“&#x2F;&#x2F;”拿掉(当然，也必须要设定好你的火墙)。不过，这只对早期的版本有影响，而在bind8.1之后则无须担心这个设定。接下来再让我们看下一段句子：</p>
<p>&#x2F;&#x2F;</p>
<p>&#x2F;&#x2F;acachingonlynameserverconfig</p>
<p>&#x2F;&#x2F;</p>
<p>zone”.”IN…{</p>
<p>typehint;</p>
<p>file”named.root”;</p>
<p>};</p>
<p>通过这几行语句，我们为named定义了DNS系统中的根区域“.”(rootzone)的设定，同时它是一个internet(IN)的区域类别。这里还指定了rootzone的服务器种类(type)为“hint”(也只有这个zone会使用这样的种类)。最后，用file指定这个区域记录文件为：“named.root”，也就是“&#x2F;var&#x2F;named&#x2F;named.root”文件。在rootzone后面，你应该还会看到如下这两段：</p>
<p>zone”localhost”IN…{</p>
<p>typemaster;</p>
<p>file”localhost.zone”;</p>
<p>allow-update…{none;};</p>
<p>};</p>
<p>zone”0.0.127.in-addr.arpa”IN…{</p>
<p>typemaster;</p>
<p>file”named.local”;</p>
<p>allow-update…{none;};</p>
<p>};</p>
<p>这里是定义出关于本机名称的DNS解释：第一个zone是localhost的正解zone，其服务器种类是master，记录档名称是localhost.zone(在&#x2F;var&#x2F;named目录下面)，但这个zone不允许客户主机(或服务器)自行更新DNS的记录。而第二个zone则是本机区域的反向解析zone。</p>
<p>再看下面的两段，这两段是cjh.com域的正向和反向解析。</p>
<p>zone”cjh.com”IN…{&#x2F;&#x2F;新加cjh.com的域</p>
<p>typemaster;</p>
<p>file”cjh.com.zone”;</p>
<p>allow-update…{none;};</p>
<p>};</p>
<p>zone”9.168.192.in-addr.arpa”IN…{&#x2F;&#x2F;新加域的反向解析</p>
<p>typemaster;</p>
<p>file”named.192.168.9”;</p>
<p>allow-update…{none;};</p>
<p>};</p>
<p>最后一行是bind9.x版本的新功能，用来进行区域转移或DNS更新所用的加密处理。</p>
<p>include”&#x2F;etc&#x2F;rndc.key”;</p>
<p>(11)创建&#x2F;var&#x2F;named目录。</p>
<p>#mkdir&#x2F;var&#x2F;named</p>
<p>#cd&#x2F;var&#x2F;named</p>
<p>(12)匿名登录到ftp站点FTP.RS.INTERNIC.NET，获取&#x2F;domain目录下的named.root文件，将该文件置于&#x2F;var&#x2F;named目录下。</p>
<p>(13)创建localhost.zone文件。</p>
<p>#vi&#x2F;var&#x2F;named&#x2F;localhost.zone</p>
<p>$TTL86400</p>
<p>$ORIGINlocalhost.</p>
<p>@1DINSOA@root(</p>
<p>42;serial(d.adams)</p>
<p>3H;refresh</p>
<p>15M;retry</p>
<p>1W;expiry</p>
<p>1D);minimum</p>
<p>1DINNS@</p>
<p>1DINA127.0.0.1</p>
<p>(14)创建named.local文件。</p>
<p>#vinamed.local</p>
<p>$TTL86400</p>
<p>@INSOAlocalhost.root.localhost.(</p>
<p>2005022700;Serial</p>
<p>28800;Refresh</p>
<p>14400;Retry</p>
<p>3600000;Expire</p>
<p>86400);Minimum</p>
<p>INNSlocalhost.</p>
<p>1INPTRlocalhost.</p>
<p>[root@Linuxetc]#mkdir&#x2F;var&#x2F;named</p>
<p>&#x2F;&#x2F;进入&#x2F;var&#x2F;named</p>
<p>[root@Linuxetc]#cd&#x2F;var&#x2F;named</p>
<p>&#x2F;&#x2F;建立localhost.zone文件</p>
<p>[root@Linuxnamed]#vilocalhost.zone</p>
<p>$TTL86400</p>
<p>$ORIGINlocalhost.</p>
<p>@1DINSOA@root(</p>
<p>42;serial(d.adams)</p>
<p>3H;refresh</p>
<p>15M;retry</p>
<p>1W;expiry</p>
<p>1D);minimum</p>
<p>1DINNS@</p>
<p>1DINA127.0.0.1</p>
<p>&#x2F;&#x2F;建立named.local文件</p>
<p>[root@Linuxnamed]#vinamed.local</p>
<p>$TTL86400</p>
<p>@INSOAlocalhost.root.localhost.(</p>
<p>1997022700;Serial</p>
<p>28800;Refresh</p>
<p>14400;Retry</p>
<p>360000061.177.252;Expire</p>
<p>86400);Minimum</p>
<p>INNSlocalhost.</p>
<p>1INPTRlocalhost.</p>
<p>(15)创建cjh.com.zone文件。</p>
<p>#vicjh.zone</p>
<p>$TTL1D</p>
<p>@INSOAcjh.com.root.cjh.com.(</p>
<p>1053891162</p>
<p>3H</p>
<p>15M</p>
<p>1W</p>
<p>1D)</p>
<p>INNScjh.com.</p>
<p>INMX5cjh.com.</p>
<p>wwwINA192.168.9.9</p>
<p>(16)创建named.192.168.9文件。</p>
<p>#vinamed.192.168.9</p>
<p>$TTL86400</p>
<p>@INSOAcjh.com.root.cjh.com.(</p>
<p>20031001;</p>
<p>7200;</p>
<p>3600;</p>
<p>43200;</p>
<p>86400);</p>
<p>@INNScjh.com.</p>
<p>9INPTRdns.cjh.com.</p>
<p>(17)在Solaris10操作系统中启动DNS服务。</p>
<p>#svcadmenable&#x2F;network&#x2F;dns&#x2F;server</p>
<p>查看：</p>
<p>#svcs-l&#x2F;network&#x2F;dns&#x2F;server</p>
<p>fmrisvc:&#x2F;network&#x2F;dns&#x2F;server:default</p>
<p>nameInternetdomainnameserver(DNS)</p>
<p>enabledtrue</p>
<p>stateonline</p>
<p>next_statenone</p>
<p>restartersvc:&#x2F;system&#x2F;svc&#x2F;restarter:default</p>
<p>contract_id25</p>
<p>dependencyrequire_all&#x2F;nonesvc:&#x2F;system&#x2F;filesystem&#x2F;minimal(online)</p>
<p>dependencyrequire_all&#x2F;nonefile:&#x2F;&#x2F;localhost&#x2F;etc&#x2F;named.conf(online)</p>
<p>dependencyrequire_any&#x2F;errorsvc:&#x2F;network&#x2F;loopback(online)</p>
<p>dependencyoptional_all&#x2F;errorsvc:&#x2F;network&#x2F;physical(online)</p>
<p>(18)测试DNS反向解析是否成功。</p>
<p>#host192.168.9.9</p>
<p>9.9.168.192.in-addr.arpadomainnamepointerdns.cjh.com.</p>
<p>(19)测试DNS解析是否成功。</p>
<p>#nslookup</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.cjh.com/">www.cjh.com</a></p>
</blockquote>
<p>Server:192.168.9.9</p>
<p>Address:192.168.9.9#53</p>
<p>Name:<a target="_blank" rel="noopener" href="http://www.cjh.com/">www.cjh.com</a></p>
<p>Address:192.168.9.9</p>
<blockquote>
</blockquote>
<p>出现上面的提示，说明DNS服务已经启动成功。</p>
<p>应用说明：</p>
<p>Solaris10基本上就已经安装好Bind9DNSServer，所以，跟本就不存在安装的问题。但为什么还要写这编文章呢?在某程度上跟和Solaris10的新功能ServiceManagementFacility(SMF)有关，而且，这编文章也有助于对SMF的深入了解。</p>
<p>Solaris10以前版本的DNS服务器启动和停止方法是：</p>
<p>启动DNSServer命令：</p>
<p>&#x2F;etc&#x2F;init.d&#x2F;namedstart</p>
<p>停止DNSServer命令：</p>
<p>&#x2F;etc&#x2F;init.d&#x2F;named</p>
<p>Solaris10版本的DNS服务器启动和停止方法是：</p>
<p>启动DNSServer命令：</p>
<p>svcadmenabledns&#x2F;server或svcadmenabledns&#x2F;server:default</p>
<p>停止DNSServer命令：</p>
<p>stopsvcadmdisabledns&#x2F;server或svcadmdisabledns&#x2F;server:default</p>
<p><strong>二、让DNS服务器在“牢监”中运行</strong></p>
<p>所谓“监牢”就是指通过chroot机制来更改某个软件运行时所能看到的根目录，即将某软件运行限制在指定目录中，保证该软件只能对该目录及其子目录的文件有所动作，从而保证整个服务器的安全。这样即使出现被破坏或被侵入，所受的损伤也较小。将软件chroot化的一个问题是该软件运行时需要的所有程序、配置文件和库文件都必须事先安装到chroot目录中，通常称这个目录为chrootjail(chroot“监牢”)。如果要在“监牢”中运行dns，而事实上根本看不到文件系统中那个真正的目录。因此需要事先创建目录，并将dns文件复制到其中。图-1中的例子，说明了牢监中的环境状态</p>
<p>图1“监牢”环境示意图</p>
<p>以下是具体步骤：</p>
<p>为DNSServer建立监牢目录</p>
<p>建立&#x2F;chroot&#x2F;dns目录</p>
<p>#mkdir&#x2F;chroot&#x2F;dns</p>
<p>建立一个空壳目录架构</p>
<p>#cd&#x2F;chroot&#x2F;dns</p>
<p>#mkdir-petc&#x2F;namedvar&#x2F;run</p>
<p>复制&#x2F;etc&#x2F;named.conf到监牢中</p>
<p>#cp&#x2F;etc&#x2F;named.conf&#x2F;chroot&#x2F;dns&#x2F;etc&#x2F;named.conf</p>
<p>复制&#x2F;etc&#x2F;named目录中的文件到Jail监牢中</p>
<p>#cp&#x2F;etc&#x2F;named&#x2F;*&#x2F;chroot&#x2F;dns&#x2F;etc&#x2F;named&#x2F;</p>
<p>更改&#x2F;chroot&#x2F;dns&#x2F;var&#x2F;run目录的权限</p>
<p>#chmod770&#x2F;chroot&#x2F;dns&#x2F;var&#x2F;run</p>
<p>#chownnoaccess:root&#x2F;chroot&#x2F;dns&#x2F;var&#x2F;run</p>
<p>为Solaris10建立一个新服务</p>
<p>原本的DNSServerService名称为dns&#x2F;server。</p>
<p>建立新服务后，以后要启动旧版本的DNS服务时，不能只启动dns&#x2F;server，而要改为dns&#x2F;server:default。</p>
<p>新DNSServerChroot服务名称为，dns&#x2F;server:chroot</p>
<p>开始建立新服务</p>
<p>#cd&#x2F;var&#x2F;svc&#x2F;manifest&#x2F;network&#x2F;dns</p>
<p>#cpserver.xmlserver-chroot.xml</p>
<p>编辑server-chroot.xml</p>
<p>寻找</p>
<p>instancename&#x3D;’default’enabled&#x3D;’false’</p>
<p>改为</p>
<p>instancename&#x3D;’chroot’enabled&#x3D;’false’　</p>
<p>寻找</p>
<p>exec&#x3D;’&#x2F;usr&#x2F;sbin&#x2F;named’</p>
<p>改为</p>
<p>exec&#x3D;’&#x2F;usr&#x2F;sbin&#x2F;named-t&#x2F;chroot&#x2F;dns’</p>
<p>寻找</p>
<p>privileges&#x3D;’basic,!proc_session,!proc_info,!file_link_any,net_privaddr,file_dac_read,file_dac_search,sys_resource’&#x2F;&gt;</p>
<p>改为</p>
<p>privileges&#x3D;’basic,!proc_session,!proc_info,!file_link_any,net_privaddr,priv_proc_chroot,priv_file_dac_read,file_dac_search,sys_resource’&#x2F;&gt;</p>
<p>寻找</p>
<p>user&#x3D;’root’</p>
<p>改为</p>
<p>user&#x3D;’noaccess’</p>
<p>保存文件退出。</p>
<p>停止原来的DNS服务</p>
<p>#svcadmdisabledns&#x2F;server:default</p>
<p>加入新的DNSServerChrootservice</p>
<p>#svccfgimportserver-chroot.xml</p>
<p>启动chrootDNSservice</p>
<p>#svcadmenabledns&#x2F;server:chroot</p>
<p>#svcsdns&#x2F;server</p>
<p>STATESTIMEFMRI</p>
<p>disabled6:21:03svc:&#x2F;network&#x2F;dns&#x2F;server:default</p>
<p>online6:27:01svc:&#x2F;network&#x2F;dns&#x2F;server:chroot</p>
<p>Bind9DNSServer现在已经能够在“监牢”环境中运行</p>
<p><strong>三、在Solaris环境下，DNS客户端程序的配置非常容易，它只需要几个简单的步骤就可以完成。</strong></p>
<p>(1)除了对&#x2F;etc&#x2F;inet&#x2F;hosts文件或NIS&#x2F;NIS+的主机名映射或者主机名(hostnames)表文件进行检查以外，还必须配置命名服务开关文件(&#x2F;etc&#x2F;nsswitch.conf)，指定域名解析服务向DNS进行查询。为了确保DNS的正常工作，在&#x2F;etc&#x2F;nsswitch.conf文件中必须包括下行的内容：</p>
<p>hosts:filesdns</p>
<p>这行的意思是如果需要命名服务，首先查找&#x2F;etc&#x2F;inet&#x2F;hosts文件，如果找不到，就到DNS中去查找。</p>
<p>(2)我们需要将主机的本地域名输入到&#x2F;etc&#x2F;defaultdomain文件中。例如，主机<a target="_blank" rel="noopener" href="http://www.cjh.net的/etc/defaultdomain%E6%96%87%E4%BB%B6%E5%BA%94%E6%9C%89%E5%A6%82%E4%B8%8B%E7%9A%84%E8%BE%93%E5%85%A5%E9%A1%B9%EF%BC%9A">www.cjh.net的/etc/defaultdomain文件应有如下的输入项：</a></p>
<p>cjh.net</p>
<p>(3)我们需要在&#x2F;etc&#x2F;resolv.conf文件中包含本地域名、本地基本DNS服务器的IP地址，以及辅助的DNS服务器的IP地址。这意味着本地DNS服务器出现故障，我们仍可以通过辅助的NDS服务器来提供最新的外部主机信息，而不必依赖&#x2F;etc&#x2F;hosts文件中的数据来解析本地地址。例如，&#x2F;etc&#x2F;resolv.conf文件的内容可能是这样：</p>
<p>domaincjh.net</p>
<p>nameserver202.104.0.20</p>
<p>nameserver53.58.31.2</p>
<p>它表明本地域是cjh.net，本地域有两台基本DNS服务器。其中，202.104.0.20为主DNS服务器，53.58.31.2为辅助DNS服务器。</p>
<p>(4)下面我们可以启动DNS客户端软件了。</p>
<p>#svcadmenablesvc:&#x2F;network&#x2F;dns&#x2F;client</p>
<p>(5)使用nslookup命令来检查DNS客户端配置是否正确。</p>
<p>#nslookup</p>
<blockquote>
</blockquote>
<p><strong>四、升级Solaris10自带BIND9.2.4版本到9.3.2的步骤</strong></p>
<p>如果您正在使用Solaris10自带的BIND9.2.4版本，升级步骤如下：</p>
<p>首先编译源代码同上。</p>
<p>#cd&#x2F;usr&#x2F;sbin</p>
<p>#mvnamednamed.orig</p>
<p>#mvnamed-checkconfnamed-checkconf.orig</p>
<p>#mvnamed-checkzonenamed-checkzone.orig</p>
<p>#cp&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;named.</p>
<p>#cp&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;named-checkconf.</p>
<p>#cp&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;named-checkzone.　</p>
<p>检查新安装的BIND9DNSServer版本命令如下：</p>
<p>#&#x2F;usr&#x2F;sbin&#x2F;named-v</p>
<p>BIND9.3.2</p>
<p>从新启动ChrootJail了的DNS服务</p>
<p>#svcadmdisabledns&#x2F;server:chroot</p>
<p>#svcadmenabledns&#x2F;server:chroot</p>
<p>#svcsdns&#x2F;server</p>
<p>STATESTIMEFMRI</p>
<p>disabled6:21:03svc:&#x2F;network&#x2F;dns&#x2F;server:default</p>
<p>online6:27:01svc:&#x2F;network&#x2F;dns&#x2F;server:chroot</p>
<p>#ps-elfgrepnamed</p>
<p>noaccess1331020:31:29?0:00&#x2F;usr&#x2F;sbin&#x2F;named-t&#x2F;chroot&#x2F;dns</p>
<p>新的Bind9DNSServerVersion9.3.2现在已经安装好了。</p>
<p><strong>总结：本文介绍了如下内容：</strong></p>
<p>怎样启动和停止Bind9DNSServer?</p>
<p>如何设定Bind9DNSServer?</p>
<p>什么是监牢?</p>
<p>Bind9DNSServer怎样使用ChrootJail(保安监牢)功能来防止入侵者进入系统?</p>
<p>怎样建立新的SMFService来启动ChrootJail后的DNSServer?</p>
<p>DNS客户端设置</p>
<p>如何把Solaris10内的Bind9DNSServer升级到最新版本?</p>
<p>正如其他的Internet协议一样，DNS由几个Internet的RFC规范(最初是RFC882、883和973)。不过要理解DNS服务器的工作原理最好的标准还是RFC1035。你可以在Internet上的好几个地方找到RFC1035，比如在<a target="_blank" rel="noopener" href="http://www.crynwr.com/crynwr/rfc1035/%E5%B0%B1%E6%9C%89%E4%B8%80%E4%B8%AA%E4%B8%8D%E9%94%99%E7%9A%84HTML%E7%89%88%E6%9C%AC%E3%80%82%E6%AD%A3%E5%A6%82%E4%BD%A0%E5%8F%AF%E8%83%BD%E6%83%B3%E5%88%B0%E7%9A%84%E9%82%A3%E6%A0%B7%EF%BC%8CRFC%E5%85%B7%E6%9C%89%E7%9B%B8%E5%BD%93%E7%9A%84%E6%8A%80%E6%9C%AF%E6%80%A7%EF%BC%8C%E4%BD%A0%E4%B8%8D%E5%A4%A7%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%AF%B9%E8%B6%85%E5%87%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%80%E8%88%AC%E6%93%8D%E4%BD%9C%E7%9A%84%E7%BB%86%E8%8A%82%E6%84%9F%E5%85%B4%E8%B6%A3%E3%80%82%E4%BD%86%E6%98%AF%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%83%B3%E5%81%9A%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86%E5%91%98%EF%BC%8C%E9%82%A3%E4%B9%88%E5%B0%B1%E8%AE%B0%E4%BD%8FRFC%E5%90%A7%E3%80%82%E5%9C%A8Internet%E7%9A%84%E5%91%BD%E5%90%8D%E6%9C%8D%E5%8A%A1%E4%B8%AD%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E6%81%90%E6%80%95%E5%B0%B1%E6%98%AF%E7%BD%91%E7%BB%9C%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1(DNS)%E4%BA%86%EF%BC%8C%E6%89%80%E4%BB%A5Solaris10%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E6%98%AFBIND9DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%82%E6%9C%AC%E6%96%87%E4%BB%8B%E7%BB%8D%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%92%8C%E7%AE%A1%E7%90%86DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%82">http://www.crynwr.com/crynwr/rfc1035/就有一个不错的HTML版本。正如你可能想到的那样，RFC具有相当的技术性，你不大可能会对超出DNS服务器一般操作的细节感兴趣。但是如果你想做个服务器管理员，那么就记住RFC吧。在Internet的命名服务中最常用的恐怕就是网络域名服务(DNS)了，所以Solaris10操作系统主要应用是BIND9DNS服务器。本文介绍如何设置和管理DNS服务器。</a></p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/mysql-client-library-%E6%89%BE%E4%B8%8D%E5%88%B0%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/">mysql client library 找不到处理方法</a><a class="next" href="/solaris%E4%B8%8B%E5%AE%89%E8%A3%85openssh/">Solaris下安装OpenSSH</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="输入关键词搜索"/><input type="hidden" name="sitesearch" value="http://example.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E5%86%8D%E6%AC%A1%E4%BC%98%E5%8C%96%EF%BC%9A%E5%87%8F%E5%B0%91%E5%A4%8D%E6%9D%82%E6%80%A7%E5%87%8F%E5%B0%91%E8%AE%BE%E5%A4%87/">家庭网络再次优化：减少复杂性减少设备</a></li><li class="post-list-item"><a class="post-list-link" href="/%E5%8C%97%E4%BA%AC%E8%81%94%E9%80%9A%E6%9B%B4%E6%8D%A2%E5%85%89%E7%8C%AB%E7%83%BD%E7%81%ABhg5582a/">北京联通更换光猫烽火HG5582A</a></li><li class="post-list-item"><a class="post-list-link" href="/%E9%9D%9E%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%ACr%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98/">非最新版本R安装软件包依赖问题</a></li><li class="post-list-item"><a class="post-list-link" href="/pycharm-r%E8%84%9A%E6%9C%AC%E7%94%BB%E5%9B%BE%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/">PyCharm R脚本 画图不显示问题</a></li><li class="post-list-item"><a class="post-list-link" href="/%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E5%8D%87%E7%BA%A7300m-1000m/">家庭网络升级300M-1000M</a></li><li class="post-list-item"><a class="post-list-link" href="/win11-23h2-%E5%8D%87%E7%BA%A724h2/">Win11 23H2 升级24H2：使用微软官方工具MBR2GPT转换磁盘MBR->GPT</a></li><li class="post-list-item"><a class="post-list-link" href="/%E6%9C%89%E9%81%93%E4%BA%91%E7%AC%94%E8%AE%B0%E4%B8%A4%E4%B8%AA%E8%B4%A6%E5%8F%B7%E5%90%88%E5%B9%B6%EF%BC%88%E7%BD%91%E6%98%93%E9%82%AE%E7%AE%B1%E5%8F%8A%E5%BE%AE%E4%BF%A1%E8%B4%A6%E5%8F%B7%EF%BC%89/">有道云笔记两个账号合并（网易邮箱及微信账号）</a></li><li class="post-list-item"><a class="post-list-link" href="/kms%E5%B7%A5%E5%85%B7%E6%BF%80%E6%B4%BBoffice-ltsc-%E6%8A%A5%E9%94%99-error-code-0x80080005/">KMS工具激活Office LTSC 报错 Error Code: 0x80080005</a></li><li class="post-list-item"><a class="post-list-link" href="/vmware-esxi-%E7%94%B15-5%E5%8D%87%E7%BA%A7%E5%88%B07-0/">VMware ESXi 由5.5升级到7.0</a></li><li class="post-list-item"><a class="post-list-link" href="/%E5%B0%8F%E7%B1%B38-%E5%88%B7%E7%AC%AC%E4%B8%89%E6%96%B9%E5%9B%BA%E4%BB%B6%E5%A7%8B%E6%9C%AB/">小米8 刷第三方固件始末</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/lib/" style="font-size: 15px;">lib</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/php%E5%BC%80%E6%BA%90%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">php开源程序</a> <a href="/tags/301/" style="font-size: 15px;">301</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/adobe/" style="font-size: 15px;">adobe</a> <a href="/tags/ajax/" style="font-size: 15px;">ajax</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/spry/" style="font-size: 15px;">spry</a> <a href="/tags/access-connections/" style="font-size: 15px;">access connections</a> <a href="/tags/Thinkpad/" style="font-size: 15px;">Thinkpad</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/a2ensite/" style="font-size: 15px;">a2ensite</a> <a href="/tags/apache/" style="font-size: 15px;">apache</a> <a href="/tags/ubuntu/" style="font-size: 15px;">ubuntu</a> <a href="/tags/%E7%BB%8F%E9%AA%8C/" style="font-size: 15px;">经验</a> <a href="/tags/htaccess/" style="font-size: 15px;">htaccess</a> <a href="/tags/bash/" style="font-size: 15px;">bash</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/windows10/" style="font-size: 15px;">windows10</a> <a href="/tags/bitcoin/" style="font-size: 15px;">bitcoin</a> <a href="/tags/p2p/" style="font-size: 15px;">p2p</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97/" style="font-size: 15px;">分布式计算</a> <a href="/tags/bb/" style="font-size: 15px;">bb</a> <a href="/tags/centos/" style="font-size: 15px;">centos</a> <a href="/tags/iptables/" style="font-size: 15px;">iptables</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/buffering/" style="font-size: 15px;">buffering</a> <a href="/tags/output/" style="font-size: 15px;">output</a> <a href="/tags/output-buffering/" style="font-size: 15px;">output_buffering</a> <a href="/tags/php-ini/" style="font-size: 15px;">php.ini</a> <a href="/tags/cdrom/" style="font-size: 15px;">cdrom</a> <a href="/tags/CentOS/" style="font-size: 15px;">CentOS</a> <a href="/tags/yum/" style="font-size: 15px;">yum</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">运维</a> <a href="/tags/clear/" style="font-size: 15px;">clear</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/ie6/" style="font-size: 15px;">ie6</a> <a href="/tags/%E5%8D%A0%E7%94%A8%E9%AB%98%E5%BA%A6/" style="font-size: 15px;">占用高度</a> <a href="/tags/blackboard/" style="font-size: 15px;">blackboard</a> <a href="/tags/ckeditor/" style="font-size: 15px;">ckeditor</a> <a href="/tags/wordpress/" style="font-size: 15px;">wordpress</a> <a href="/tags/gd/" style="font-size: 15px;">gd</a> <a href="/tags/imagecreate/" style="font-size: 15px;">imagecreate</a> <a href="/tags/dfGallery/" style="font-size: 15px;">dfGallery</a> <a href="/tags/N-A/" style="font-size: 15px;">#N/A</a> <a href="/tags/excel/" style="font-size: 15px;">excel</a> <a href="/tags/Office%E6%8A%80%E5%B7%A7/" style="font-size: 15px;">Office技巧</a> <a href="/tags/dotproject/" style="font-size: 15px;">dotproject</a> <a href="/tags/project/" style="font-size: 15px;">project</a> <a href="/tags/office/" style="font-size: 15px;">office</a> <a href="/tags/compact/" style="font-size: 15px;">compact</a> <a href="/tags/extract/" style="font-size: 15px;">extract</a> <a href="/tags/fck%EF%BC%8Ceditor/" style="font-size: 15px;">fck，editor</a> <a href="/tags/ftp/" style="font-size: 15px;">ftp</a> <a href="/tags/buzz/" style="font-size: 15px;">buzz</a> <a href="/tags/google-reader/" style="font-size: 15px;">google reader</a> <a href="/tags/google/" style="font-size: 15px;">google</a> <a href="/tags/hosts/" style="font-size: 15px;">hosts</a> <a href="/tags/ipv6/" style="font-size: 15px;">ipv6</a> <a href="/tags/%E6%9C%80%E6%96%B0%E8%B5%84%E8%AE%AF/" style="font-size: 15px;">最新资讯</a> <a href="/tags/hook/" style="font-size: 15px;">hook</a> <a href="/tags/flash/" style="font-size: 15px;">flash</a> <a href="/tags/html4/" style="font-size: 15px;">html4</a> <a href="/tags/Web-Applacation/" style="font-size: 15px;">Web Applacation</a> <a href="/tags/insert-ino/" style="font-size: 15px;">insert ino</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/update/" style="font-size: 15px;">update</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/jeecms/" style="font-size: 15px;">jeecms</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/jQuery-lightBox/" style="font-size: 15px;">jQuery lightBox</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/jpgraph/" style="font-size: 15px;">jpgraph</a> <a href="/tags/0x80080005/" style="font-size: 15px;">0x80080005</a> <a href="/tags/kms/" style="font-size: 15px;">kms</a> <a href="/tags/SppExtComObj/" style="font-size: 15px;">SppExtComObj</a> <a href="/tags/pchart/" style="font-size: 15px;">pchart</a> <a href="/tags/limesurvey/" style="font-size: 15px;">limesurvey</a> <a href="/tags/fckeditor/" style="font-size: 15px;">fckeditor</a> <a href="/tags/%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93/" style="font-size: 15px;">中文字体</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/mb-substr/" style="font-size: 15px;">mb_substr</a> <a href="/tags/spss/" style="font-size: 15px;">spss</a> <a href="/tags/bootcamp/" style="font-size: 15px;">bootcamp</a> <a href="/tags/macbook/" style="font-size: 15px;">macbook</a> <a href="/tags/macos/" style="font-size: 15px;">macos</a> <a href="/tags/%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81/" style="font-size: 15px;">重置密码</a> <a href="/tags/rss/" style="font-size: 15px;">rss</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/MariaDB/" style="font-size: 15px;">MariaDB</a> <a href="/tags/mysqlnd/" style="font-size: 15px;">mysqlnd</a> <a href="/tags/mysq/" style="font-size: 15px;">mysq</a> <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" style="font-size: 15px;">命令行</a> <a href="/tags/%E5%A4%87%E4%BB%BD/" style="font-size: 15px;">备份</a> <a href="/tags/%E8%BF%98%E5%8E%9F/" style="font-size: 15px;">还原</a> <a href="/tags/expires/" style="font-size: 15px;">expires</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">ICT经验网.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a> Theme by<a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Maupassant.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>